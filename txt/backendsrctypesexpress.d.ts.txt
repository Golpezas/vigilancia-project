// backend/src/types/express.d.ts
// Augmentación oficial de Express para req.user con JWT payload
// 2026 best practice: tipado exacto + opcionalidad segura

import { TokenPayload } from '../services/authService'; // ← Importa el tipo real que usas

// Si por alguna razón aún no puedes importar (circularidad), define inline:
interface TokenPayload {
  id: string;
  email: string;
  role: 'ADMIN' | 'CLIENT';
}

declare module 'express-serve-static-core' {
  interface Request {
    /**
     * Usuario autenticado vía JWT
     * Disponible después de pasar authMiddleware
     */
    user?: TokenPayload;
  }
}

export {}; // Hace que este archivo sea módulo → evita errores de ambient